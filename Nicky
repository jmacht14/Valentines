<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Will You Be My Valentine?</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Comic Sans MS', 'Trebuchet MS', cursive;
    }

    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(circle at top, #ffd6e7, #ff9fc4);
      overflow: hidden;
    }

    .roses {
      position: fixed;
      inset: 0;
      background-image: url('https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Red_rose_flower.jpg/640px-Red_rose_flower.jpg');
      background-size: 180px 180px;
      background-repeat: repeat;
      opacity: 0.25;
      z-index: -1;
    }

    .container {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 3rem;
      color: #b30047;
      text-shadow: 2px 2px #fff;
      margin-bottom: 40px;
    }

    .buttons {
      position: relative;
      width: 100%;
      height: 200px;
    }

    button {
      padding: 18px 36px;
      font-size: 1.5rem;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: transform 0.2s ease, left 0.2s ease, top 0.2s ease;
      position: absolute;
    }

    #yesBtn {
      background: #ff3366;
      color: white;
      left: 50%;
      top: 40%;
      transform: translate(-120%, -50%);
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    }

    #noBtn {
      background: #ccc;
      color: #333;
      left: 50%;
      top: 40%;
      transform: translate(20%, -50%);
    }

    .message {
      margin-top: 40px;
      font-size: 2rem;
      color: #b30047;
      display: none;
    }

    .heart {
      position: fixed;
      font-size: 24px;
      animation: floatUp 2.5s ease-out forwards;
      pointer-events: none;
    }

    #finalHeart {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 220px;
      color: #ff2f6d;
      background: #ffd6e7;
      z-index: 10;
      animation: popIn 0.6s ease-out forwards, pulse 2s ease-in-out infinite;
      text-shadow:
        0 0 0 gold,
        4px 4px 0 gold,
        -4px 4px 0 gold,
        4px -4px 0 gold,
        -4px -4px 0 gold;
    }

    #finalHeart span {
      position: absolute;
      font-size: 3rem;
      color: white;
      font-weight: bold;
      text-shadow: 2px 2px 10px rgba(0,0,0,0.4);
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes popIn {
      from { transform: scale(0.2); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      to {
        transform: translateY(-200px) scale(1.8);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <div class="roses"></div>

  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7e6c6b93c2.mp3" type="audio/mpeg">
  </audio>

  <div class="container">
    <h1>Nicky, will you be my Valentine? üíò</h1>

    <div class="buttons">
      <button id="yesBtn">Yes üíñ</button>
      <button id="noBtn">No üôÉ</button>
    </div>

    <div class="message" id="message">Perfect answer! I love you üíï</div>
    <button id="shotBtn" style="display:none;margin-top:20px;position:static;">Screenshot this moment üì∏</button>
    <div id="finalHeart" style="display:none;align-items:center;justify-content:center;flex-direction:column;">
      <img id="heartImage" alt="Joe & Nicky Heart" style="max-width:80%;height:auto;" />
      <button id="downloadBtn" style="margin-top:30px;font-size:1.2rem;padding:12px 24px;border-radius:30px;border:none;cursor:pointer;">Download as image ‚¨áÔ∏è</button>
    </div>
  </div>

  <script>
    const noBtn = document.getElementById('noBtn');
    const yesBtn = document.getElementById('yesBtn');
    const message = document.getElementById('message');
    const bgMusic = document.getElementById('bgMusic');
    const shotBtn = document.getElementById('shotBtn');

    let noScale = 1;

    function moveNoButton() {
      const container = document.querySelector('.buttons');
      const maxX = container.clientWidth - noBtn.offsetWidth;
      const maxY = container.clientHeight - noBtn.offsetHeight;

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      noScale *= 0.85;
      if (noScale < 0.3) noScale = 0.3;

      noBtn.style.left = x + 'px';
      noBtn.style.top = y + 'px';
      noBtn.style.transform = `scale(${noScale})`;
    }

    noBtn.addEventListener('mouseenter', () => {
      bgMusic.play();
      moveNoButton();
    });

    noBtn.addEventListener('click', moveNoButton);

    yesBtn.addEventListener('click', () => {
      message.style.display = 'block';
      noBtn.style.display = 'none';
      yesBtn.style.transform = 'scale(1.3)';
      explodeHearts();
      shotBtn.style.display = 'inline-block';

      bgMusic.volume = 0.3;
      bgMusic.play();
      swellMusic();
    });

    function swellMusic() {
      let volume = bgMusic.volume;
      const swell = setInterval(() => {
        volume += 0.02;
        if (volume >= 1) {
          bgMusic.volume = 1;
          clearInterval(swell);
        } else {
          bgMusic.volume = volume;
        }
      }, 120);
    }

    shotBtn.addEventListener('click', () => {
      document.querySelector('.container').style.display = 'none';
      document.querySelector('.roses').style.display = 'none';
      document.getElementById('finalHeart').style.display = 'flex';
      generateHeartImage();
    });

    function generateHeartImage() {
      const canvas = document.createElement('canvas');
      const size = 600;
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');

      ctx.fillStyle = '#ffd6e7';
      ctx.fillRect(0, 0, size, size);

      ctx.beginPath();
      const x = size / 2;
      const y = size / 2 + 40;
      ctx.moveTo(x, y);
      ctx.bezierCurveTo(x - 150, y - 150, x - 300, y + 50, x, y + 250);
      ctx.bezierCurveTo(x + 300, y + 50, x + 150, y - 150, x, y);

      ctx.fillStyle = '#ff2f6d';
      ctx.fill();

      ctx.lineWidth = 12;
      ctx.strokeStyle = 'gold';
      ctx.stroke();

      ctx.fillStyle = 'white';
      ctx.font = 'bold 48px Trebuchet MS';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('Joe & Nicky', x, y + 80);

      document.getElementById('heartImage').src = canvas.toDataURL('image/png');
    }

    function explodeHearts() {
      for (let i = 0; i < 40; i++) {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = '‚ù§Ô∏è';
        heart.style.left = Math.random() * window.innerWidth + 'px';
        heart.style.top = Math.random() * window.innerHeight + 'px';
        heart.style.fontSize = 20 + Math.random() * 30 + 'px';
        document.body.appendChild(heart);

        setTimeout(() => heart.remove(), 2500);
      }
    }
      const downloadBtn = document.getElementById('downloadBtn');

    downloadBtn.addEventListener('click', () => {
      html2canvas(document.getElementById('finalHeart')).then(canvas => {
        const link = document.createElement('a');
        link.download = 'Joe-and-Nicky-Valentine.png';
        link.href = canvas.toDataURL('image/png');
        link.click();
      });
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</body>
</html>
